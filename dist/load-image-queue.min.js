!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("LoadImageQueue",[],t):"object"==typeof exports?exports.LoadImageQueue=t():e.LoadImageQueue=t()}(this,function(){return function(e){function t(u){if(n[u])return n[u].exports;var r=n[u]={i:u,l:!1,exports:{}};return e[u].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,u){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:u})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=2)}([function(e,t,n){"use strict";function u(e,t,n){var u=new Image;u.onload=function(){t()},u.onerror=function(){n(new Error("Image not found"))},u.src=e.url}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u},function(e,t,n){!function(t,n){e.exports=function(){return function(e){function t(u){if(n[u])return n[u].exports;var r=n[u]={i:u,l:!1,exports:{}};return e[u].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,u){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:u})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=6)}([function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=u(o),a=n(5),l=u(a),c=function e(t){var n=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r(this,e),this.add=function(e,t,u){var r=new i.default(e,t,u,n);return n.core.add(r).start(),r},this.cancel=function(e){var t=e;e instanceof i.default&&(t=e.url),n.core.cancel(t)&&n.core.start()},this.core=new l.default(t,u)};t.default=c},function(e,t,n){"use strict";function u(e,t,n,u){var r=this;this.url=e,this.success=function(){for(var n=arguments.length,u=Array(n),r=0;r<n;r++)u[r]=arguments[r];t.apply(void 0,[e].concat(u))},this.error=function(t){n(e,t)},this.cancel=function(){u.cancel(r)},this.task=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new i.default(e,t),u={};n.core.onEntrySuccess=function(e,t){u[e.url]=t},this.add=function(e,t,r){var o=u[e];if(void 0===o)return n.add(e,t,r);var i=new l.default(e,t,r,n);return i.success(o),i},this.cancel=function(e){n.cancel(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=u(o),a=n(1),l=u(a);t.default=r},function(e,t,n){"use strict";function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new o.default(e,t);this.add=n.add,this.cancel=n.cancel}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=u},function(e,t,n){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),i=function(){function e(){u(this,e),this.list={}}return o(e,[{key:"has",value:function(e){return"object"===r(this.list[e])}},{key:"length",value:function(){return this.keys().length}},{key:"keys",value:function(){return Object.keys(this.list)}},{key:"shift",value:function(){var e=this.keys();return 0===e.length?null:this.pull(e[0])}},{key:"pull",value:function(e){var t=this.list[e];return"object"===(void 0===t?"undefined":r(t))?(this.remove(e),t):null}},{key:"push",value:function(e){return this.list[e.url]=e,this}},{key:"remove",value:function(e){return delete this.list[e],this}}]),e}();t.default=i},function(e,t,n){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return!1===e.has(t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),i=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u(this,e),this.concurrentJobs=n,this.queue=new a.default,this.loading=new a.default,this.LoadTaskClass=t,this.onEntrySuccess=null,this.onEntryError=null,this.startTimeout=null}return o(e,[{key:"add",value:function(e){return this.loading.has(e.url)?this.loading.push(e):this.queue.push(e),this}},{key:"start",value:function(){var e=this;if(this.loading.length()>=this.concurrentJobs)return!1;null!==this.startTimeout&&clearTimeout(this.startTimeout),this.startTimeout=setTimeout(function(){e.forceStart()},10)}},{key:"forceStart",value:function(){var e=this,t=this.queue.shift();if(null===t)return!1;this.loading.push(t);var n=t.url,u=this.LoadTaskClass;return t.task=new u(t,function(){for(var u=arguments.length,o=Array(u),i=0;i<u;i++)o[i]=arguments[i];r(e.loading,n)||(t.success.apply(t,o),e.loading.remove(n),e.start(),null!==e.onEntrySuccess&&e.onEntrySuccess(t,o))},function(u){r(e.loading,n)||(t.error(u),e.loading.remove(n),e.start(),null!==e.onEntryError&&e.onEntryError(t,u))}),!0}},{key:"cancel",value:function(e){if(this.queue.remove(e),this.loading.has(e)){var t=this.loading.pull(e);return null!==t.task&&"function"==typeof t.task.cancel&&t.task.cancel(),!0}return!1}}]),e}();t.default=l},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CachedQueue=t.Queue=void 0;var r=n(3),o=u(r),i=n(2),a=u(i);t.Queue=o.default,t.CachedQueue=a.default,t.default=o.default}])}()}()},function(e,t,n){"use strict";function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?new i.Queue(o.default,e):new i.CachedQueue(o.default,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.global=t.createImageQueue=void 0;var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(1),a=u();t.createImageQueue=u,t.global=a,t.default=a}])});
//# sourceMappingURL=load-image-queue.min.js.map