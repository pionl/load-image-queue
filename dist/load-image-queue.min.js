!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("LoadImageQueue",[],t):"object"==typeof exports?exports.LoadImageQueue=t():e.LoadImageQueue=t()}(this,function(){return function(e){function t(u){if(n[u])return n[u].exports;var r=n[u]={i:u,l:!1,exports:{}};return e[u].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,u){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:u})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=4)}([function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=u(o),a=n(8),c=u(a),l=function e(t){var n=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;r(this,e),this.add=function(e,t,u){var r=new i.default(e,t,u,n);return n.core.add(r).start(),r},this.cancel=function(e){var t=e;e instanceof i.default&&(t=e.url),n.core.cancel(t)&&n.core.start()},this.core=new c.default(t,u,o)};t.default=l},function(e,t,n){"use strict";function u(e,t){for(var n=0;n<e.length;n++)t(e[n])}function r(e,t,n,r){var o=this;this.callbacks={success:[t],error:[n]},this.url=e,this.success=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];u(o.callbacks.success,function(t){t.apply(void 0,[e].concat(n))})},this.error=function(t){u(o.callbacks.success,function(n){n(e,t)})},this.cancel=function(){r.cancel(o)},this.task=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function u(e,t,n){var u=new Image;u.onload=function(){t()},u.onerror=function(){n(new Error("Image not found"))},u.src=e.url}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CachedQueue=t.Queue=void 0;var r=n(7),o=u(r),i=n(5),a=u(i);t.Queue=o.default,t.CachedQueue=a.default,t.default=o.default},function(e,t,n){"use strict";function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?new i.Queue(o.default,e):new i.CachedQueue(o.default,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.global=t.createImageQueue=void 0;var r=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(3),a=u();t.createImageQueue=u,t.global=a,t.default=a},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,u=new i.default(e,t,n),r={};u.core.onEntrySuccess=function(e,t){r[e.url]=t},this.add=function(e,t,n){var o=r[e];if(void 0===o)return u.add(e,t,n);var i=new c.default(e,t,n,u);return i.success(o),i},this.cancel=function(e){u.cancel(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=u(o),a=n(1),c=u(a);t.default=r},function(e,t,n){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),i=function(){function e(){u(this,e),this.list={}}return o(e,[{key:"get",value:function(e){return this.list[e]}},{key:"has",value:function(e){var t=this.get(e);return"object"===(void 0===t?"undefined":r(t))}},{key:"length",value:function(){return this.keys().length}},{key:"keys",value:function(){return Object.keys(this.list)}},{key:"shift",value:function(){var e=this.keys();return 0===e.length?null:this.pull(e[0])}},{key:"pull",value:function(e){var t=this.get(e);return"object"===(void 0===t?"undefined":r(t))?(this.remove(e),t):null}},{key:"push",value:function(e){return this.list[e.url]=e,this}},{key:"remove",value:function(e){return delete this.list[e],this}}]),e}();t.default=i},function(e,t,n){"use strict";function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,u=new o.default(e,t,n);this.add=u.add,this.cancel=u.cancel}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=u},function(e,t,n){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return!1===e.has(t)}function o(e,t){if(!1===e.has(t.url))return!1;var n=e.get(t.url);return n.callbacks.error.push(t.callbacks.error[0]),n.callbacks.success.push(t.callbacks.success[0]),t.task=n.task,!0}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),a=n(6),c=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;u(this,e),this.concurrentJobs=n,this.queue=new c.default,this.loading=new c.default,this.LoadTaskClass=t,this.onEntrySuccess=null,this.onEntryError=null,this.startTimeoutTime=void 0===r?50:r,this.startTimeout=null}return i(e,[{key:"add",value:function(e){return o(this.loading,e)?this:(!1===o(this.queue,e)&&this.queue.push(e),this)}},{key:"start",value:function(){var e=this;return!(this.loading.length()>=this.concurrentJobs)&&(null!==this.startTimeout&&clearTimeout(this.startTimeout),null===this.startTimeoutTime?this.forceStart():void(this.startTimeout=setTimeout(function(){for(var t=!1;!1===t&&e.loading.length()<e.concurrentJobs;)t=!1===e.forceStart()},this.startTimeoutTime)))}},{key:"forceStart",value:function(){var e=this,t=this.queue.shift();if(null===t)return!1;this.loading.push(t);var n=t.url,u=this.LoadTaskClass;return t.task=new u(t,function(){for(var u=arguments.length,o=Array(u),i=0;i<u;i++)o[i]=arguments[i];r(e.loading,n)||(t.success.apply(t,o),e.loading.remove(n),e.start(),null!==e.onEntrySuccess&&e.onEntrySuccess(t,o))},function(u){r(e.loading,n)||(t.error(u),e.loading.remove(n),e.start(),null!==e.onEntryError&&e.onEntryError(t,u))}),!0}},{key:"cancel",value:function(e){if(this.queue.remove(e),this.loading.has(e)){var t=this.loading.pull(e);return null!==t.task&&"function"==typeof t.task.cancel&&t.task.cancel(),!0}return!1}}]),e}();t.default=l}])});
//# sourceMappingURL=load-image-queue.min.js.map